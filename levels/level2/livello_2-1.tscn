[gd_scene load_steps=23 format=3 uid="uid://c18vwxd78hcls"]

[ext_resource type="Script" uid="uid://dxjg0ry8twf1j" path="res://levels/level2/scripts/spawner_2-1.gd" id="1_3f7h3"]
[ext_resource type="PackedScene" uid="uid://cx71uodgqqh3n" path="res://levels/scenes/mission_start.tscn" id="2_c4bar"]
[ext_resource type="PackedScene" uid="uid://dn5eiepdk01y0" path="res://assets/enemies/enemy_cd_spitfire.tscn" id="2_jrmtn"]
[ext_resource type="Script" uid="uid://creel5m33sw0q" path="res://levels/level2/scripts/sfondo_scorrimento.gd" id="3_3f7h3"]
[ext_resource type="PackedScene" uid="uid://c3jjwow6jvfm" path="res://assets/enemies/enemy_cd_follow.tscn" id="3_jh2oa"]
[ext_resource type="PackedScene" uid="uid://swhr6w8kahsf" path="res://levels/scenes/mission_complete.tscn" id="3_vcxbm"]
[ext_resource type="PackedScene" uid="uid://b7owavbs087te" path="res://assets/enemies/enemy_cd_turret.tscn" id="4_h6phn"]
[ext_resource type="Script" uid="uid://dxh5w3l82vuf6" path="res://levels/level2/scripts/scrolling_manager.gd" id="4_ral0x"]
[ext_resource type="PackedScene" uid="uid://bt5njctmkut2d" path="res://assets/enemies/enemy_cd_arc_shooter.tscn" id="5_8g4u8"]
[ext_resource type="Texture2D" uid="uid://cfebvicabcflv" path="res://levels/level2/images/sea_tile.png" id="5_ral0x"]
[ext_resource type="PackedScene" uid="uid://ddao83t4wnm2i" path="res://assets/enemies/enemy_cd_strafer.tscn" id="6_7v7je"]
[ext_resource type="Texture2D" uid="uid://87s3e6c0dh8x" path="res://levels/level2/images/palude_sea.png" id="6_jrmtn"]
[ext_resource type="Texture2D" uid="uid://dv8b6j4k0iaw7" path="res://levels/level2/images/palude.png" id="7_jh2oa"]
[ext_resource type="Texture2D" uid="uid://qgqdji57bbs5" path="res://levels/level2/images/palude_gas.png" id="9_ral0x"]
[ext_resource type="PackedScene" uid="uid://ct61xmn6vvkwl" path="res://assets/bosses/boss_sharktwo_1.tscn" id="9_vcxbm"]
[ext_resource type="PackedScene" uid="uid://3uls4o7kyg48" path="res://levels/scenes/boss_entering.tscn" id="9_yqfw3"]
[ext_resource type="AudioStream" uid="uid://bd1chkikqp6yk" path="res://levels/level2/audio/music_2.ogg" id="11_ral0x"]
[ext_resource type="PackedScene" uid="uid://b8judt8newgkh" path="res://ui.tscn" id="16_8cm7s"]
[ext_resource type="Texture2D" uid="uid://de4lfg0aab5j5" path="res://levels/level1/images/sea_tile.png" id="19_bi2e6"]
[ext_resource type="Shader" uid="uid://ljvo33uh1a5y" path="res://scanlines.gdshader" id="23_fqpmd"]
[ext_resource type="AudioStream" uid="uid://lad8h1drrxn5" path="res://levels/level1/audio/eagleone_boss.ogg" id="25_7hub5"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_vwq56"]
shader = ExtResource("23_fqpmd")
shader_parameter/line_density = 4.0
shader_parameter/line_darkness = 0.6

[node name="Livello2-1" type="Node2D"]

[node name="WaveManager" type="Node" parent="." node_paths=PackedStringArray("level_music", "boss_music")]
script = ExtResource("1_3f7h3")
start_level_scene = ExtResource("2_c4bar")
level_completed_scene = ExtResource("3_vcxbm")
chopter_dspitfire_scene = ExtResource("2_jrmtn")
chopter_dfollow_scene = ExtResource("3_jh2oa")
turret_enemy_scene = ExtResource("4_h6phn")
chopter_darc_shooter_scene = ExtResource("5_8g4u8")
chopter_strafer_scene = ExtResource("6_7v7je")
boss_enemy_scene = ExtResource("9_vcxbm")
boss_entering_scene = ExtResource("9_yqfw3")
level_music = NodePath("../MusicaLivello")
boss_music = NodePath("../MusicaBoss")
level_tag = "2.1"

[node name="Timer" type="Timer" parent="WaveManager"]
wait_time = 1.5
autostart = true
ignore_time_scale = true

[node name="UI" parent="." instance=ExtResource("16_8cm7s")]

[node name="SfondoScorrimento" type="ParallaxBackground" parent="." groups=["sfondo"]]
script = ExtResource("3_3f7h3")

[node name="GroundManager" type="Node2D" parent="SfondoScorrimento"]
z_index = -100
script = ExtResource("4_ral0x")
textures = Array[Texture2D]([ExtResource("5_ral0x"), ExtResource("5_ral0x"), ExtResource("5_ral0x"), ExtResource("5_ral0x"), ExtResource("6_jrmtn"), ExtResource("7_jh2oa"), ExtResource("7_jh2oa"), ExtResource("7_jh2oa")])

[node name="SegmentoA" type="TextureRect" parent="SfondoScorrimento/GroundManager"]
offset_right = 2048.0
offset_bottom = 2048.0
texture = ExtResource("19_bi2e6")
stretch_mode = 1

[node name="SegmentoB" type="TextureRect" parent="SfondoScorrimento/GroundManager"]
offset_right = 2048.0
offset_bottom = 1024.0
texture = ExtResource("6_jrmtn")
stretch_mode = 1

[node name="SegmentoD" type="TextureRect" parent="SfondoScorrimento/GroundManager"]
offset_right = 2048.0
offset_bottom = 1024.0
texture = ExtResource("7_jh2oa")
stretch_mode = 1

[node name="StratoNuvole" type="ParallaxLayer" parent="SfondoScorrimento" groups=["strato_nuvole"]]
motion_scale = Vector2(0.7, 0.7)
motion_mirroring = Vector2(0, 2048)

[node name="TextureRect" type="TextureRect" parent="SfondoScorrimento/StratoNuvole"]
modulate = Color(1, 1, 1, 0.243137)
offset_right = 2048.0
offset_bottom = 4096.0
scale = Vector2(0.5, 0.5)
texture = ExtResource("9_ral0x")
expand_mode = 1
stretch_mode = 1

[node name="EffettiPostProcessing" type="CanvasLayer" parent="."]
layer = 128

[node name="ColorRect" type="ColorRect" parent="EffettiPostProcessing"]
material = SubResource("ShaderMaterial_vwq56")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2

[node name="MusicaLivello" type="AudioStreamPlayer" parent="."]
stream = ExtResource("11_ral0x")
volume_db = 7.0
bus = &"Music"

[node name="MusicaBoss" type="AudioStreamPlayer" parent="."]
stream = ExtResource("25_7hub5")
bus = &"Music"
parameters/looping = true

[connection signal="timeout" from="WaveManager/Timer" to="WaveManager" method="_on_timer_timeout"]
